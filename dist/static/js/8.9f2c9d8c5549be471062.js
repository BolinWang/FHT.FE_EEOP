webpackJsonp([8,33],{"/azh":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("lC5x"),i=o.n(a),s=o("hRKE"),l=o.n(s),n=o("rVsN"),r=o.n(n),c=o("J0Oq"),m=o.n(c),u=o("IHPB"),h=o.n(u),d=o("3cXf"),p=o.n(d),g=o("ZLEe"),f=o.n(g),b=o("aA9S"),v=o.n(b),y=o("KH7x"),R=o.n(y),D=o("T76A"),C=o.n(D),L=o("o1W5"),k=o.n(L),_=o("QHcW"),x=o("pFO2"),N=o("H1GV"),I=o.n(N),w=o("fDDG"),P=o.n(w),S=o("0xDb"),T=function(e,t){var o=0;return e.length!==t.length?++o:(e.forEach(function(e,a){e.imageName!==t[a].imageName&&o++}),o>0)};t.default={components:{areaSelect:C.a,Preview:I.a,ImageCropper:P.a,mapSelect:k.a},data:function(){return{hostingRoomDetail:{},tempFormData:{},hostingRoomDetailRules:{areaCode:[{required:!0,validator:function(e,t,o){""===t[0]?o(new Error("请选择所在地区")):o()},trigger:"change"}],zoneId:[{required:!0,message:"请选择所属板块",trigger:"change"}],address:[{required:!0,message:"请输入公寓/小区",trigger:"change"}],buildingName:[{required:!0,message:"请输入楼幢名",trigger:"blur"}],roomNo:[{required:!0,message:"请输入房间号",trigger:"blur"}],chamberCount:[{required:!0,message:"请输入室",trigger:"blur"}],boardCount:[{required:!0,message:"请输入厅",trigger:"blur"}],toiletCount:[{required:!0,message:"请输入卫",trigger:"blur"}],houseArea:[{required:!0,message:"请输入面积",trigger:"blur"}],houseDirection:[{required:!0,message:"请选择房屋朝向",trigger:"change"}],decorationDegree:[{required:!0,message:"请选择装修程度",trigger:"change"}],floorName:[{required:!0,message:"请输入房源所在层",trigger:"blur"}],floorAmount:[{required:!0,message:"请输入总楼层数",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactMobile:[{required:!0,message:"请输入联系人电话",trigger:"blur"}],houseDesc:[{max:150,message:"长度不能超过150个字符",trigger:"change"}],sourceInfo:[{required:!0,message:"请选择一个房源提供者",trigger:"change"}],roomDetail:{roomArea:[{required:!0,message:"请输入房间面积",trigger:"blur"}],roomDirection:[{required:!0,message:"请选择房间朝向",trigger:"change"}]},orgId:[{required:!0,message:"请选择一个组织，支持模糊查询",trigger:"change"}],tag:[{required:!0,message:"",trigger:"change"}]},zoneList:[],orgList:[],loading:!1,decorationDegreeList:[{label:"毛坯",value:1},{label:"简装",value:2},{label:"精装修",value:3},{label:"豪华装",value:4}],roomDirectionList:[{label:"朝南",value:1},{label:"朝北",value:2},{label:"朝东",value:3},{label:"朝西",value:4},{label:"东南",value:5},{label:"西南",value:6},{label:"东北",value:7},{label:"西北",value:8}],uploadPicsModelVisible:!1,facilityGroup:[{label:"家电",facilitys:[{value:"2",label:"洗衣机"},{value:"3",label:"空调"},{value:"4",label:"冰箱"},{value:"5",label:"电视"}]},{label:"家具",facilitys:[{value:"7",label:"沙发"},{value:"8",label:"茶几"},{value:"10",label:"餐桌"}]},{label:"其他",facilitys:[{value:"6",label:"宽带"}]}],activeRoomName:"1",tabIndex:1,cityManagerList:[],filterManagerList:[],cropperList:[],accept:"image/png, image/jpeg, image/jpg",curPicListIndex:-1,currentPicList:[]}},computed:{roomFacilityGroup:function(){var e=this.facilityGroup.slice(0);return e.splice(1,1,{label:"家具",facilitys:[{value:"1",label:"床"},{value:"9",label:"书桌"},{value:"12",label:"衣柜"}]}),e}},methods:{searchZoneList:function(e){var t=this,o=R()(this.hostingRoomDetail.areaCode,3);this.hostingRoomDetail.provinceId=o[0],this.hostingRoomDetail.cityId=o[1],this.hostingRoomDetail.regionId=o[2],e||(this.hostingRoomDetail.address="",this.hostingRoomDetail.zoneId=""),void 0!==this.hostingRoomDetail.areaCode[2]?Object(_.o)({regionId:this.hostingRoomDetail.regionId}).then(function(e){t.zoneList=e.data.list}):this.zoneList=[]},addressChange:function(e){this.hostingRoomDetail=v()(this.hostingRoomDetail,e),this.$refs.hostingRoomDetail.validateField("address"),this.searchZoneList(!0)},handleTabsEdit:function(e,t){var o=this;if("add"===t){if(this.hostingRoomDetail.hostingRooms.length>25)return;var a=this.hostingRoomDetail.hostingRooms.length,i=++this.tabIndex+"";this.hostingRoomDetail.hostingRooms.push({roomName:"房间"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")[a],name:i,roomArea:"",roomAttributesList:[],pictures:[]}),this.activeRoomName=i}if("remove"===t){var s=this.hostingRoomDetail.hostingRooms,l=this.activeRoomName;l===e&&s.forEach(function(t,o){if(t.name===e){var a=s[o-1]||s[o+1];a&&(l=a.name)}}),this.hostingRoomDetail.hostingRooms=s.filter(function(t){return t.name!==e}),this.hostingRoomDetail.hostingRooms.forEach(function(e,t){e.roomName="房间"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")[t]}),this.$nextTick(function(){o.activeRoomName=l})}},searchOrgListByKeywords:function(e){var t=this;""!==e?(this.loading=!0,Object(_.l)({orgName:e}).then(function(e){t.loading=!1,"0"===e.code&&(t.orgList=e.data.list)})):this.orgList=[]},setOrg:function(e){this.hostingRoomDetail.accountName=e?e.accountName:"",this.hostingRoomDetail.adminUserId=e?e.adminUserId:""},fetchFlyTigerList:function(e){var t=this;""!==e?(this.loading=!0,this.cityManagerList.length?(this.loading=!1,this.filterManagerList=this.cityManagerList.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.mobile.includes(e)})):x.b.queryCityManager().then(function(o){t.loading=!1,"0"===o.code&&o.data&&(t.cityManagerList=o.data,t.filterManagerList=t.cityManagerList.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.mobile.includes(e)}))})):this.filterManagerList=[]},handleSourceInfo:function(e){e||(this.hostingRoomDetail.sourceInfo="",this.filterManagerList=[])},setRoomDetailData:function(e){var t=this;2===e.houseRentType&&(this.tabIndex=e.hostingRooms.length,this.activeRoomName="1"),e.isEditFlag?(e.zoneId=0===e.zoneId?"":e.zoneId,this.orgList=[{orgId:e.orgId,orgName:e.orgName}],1===e.houseRentType&&e.pictures?e.pictures.forEach(function(e){e.title=e.imageName,e.key=Math.random().toFixed(5),e.isBase64=0}):e.hostingRooms.forEach(function(e){e.pictures&&e.pictures.forEach(function(e){e.title=e.imageName,e.key=Math.random().toFixed(5),e.isBase64=0})})):(this.orgList=[],this.zoneList=[]),e.tag=!!e.tag,e.sourceInfo&&(this.filterManagerList=[{id:e.sourceInfo.split(",")[0],name:e.sourceInfo.split(",")[1]}],e.sourceInfo=e.sourceInfo.split(",")[0]),this.$nextTick(function(){t.$set(t,"hostingRoomDetail",e),t.$set(t,"tempFormData",Object(S.d)(e)),e.isEditFlag&&e.zoneId&&t.searchZoneList(!0),t.$nextTick(function(){t.$refs.hostingRoomDetail.clearValidate()})})},checkEditFlag:function(){var e=this,t=!1;return f()(this.tempFormData).forEach(function(o){p()(e.tempFormData[o])!==p()(e.hostingRoomDetail[o])&&("pictures"===o?t=T(e.tempFormData[o],e.hostingRoomDetail[o]):"hostingRooms"===o?e.tempFormData.hostingRooms.forEach(function(o,a){f()(o).forEach(function(i){p()(o[i])!==p()(e.hostingRoomDetail.hostingRooms[a][i])&&(t="pictures"!==i||T(o[i],e.hostingRoomDetail.hostingRooms[a].pictures))})}):t=!0)}),t},returnRoomDetailData:function(){var e=this,t=!1;return this.$refs.hostingRoomDetail.validate(function(o){if(!o){if(2===e.hostingRoomDetail.houseRentType)for(var a=function(t){e.$refs.hostingRoomDetail.validateField("hostingRooms."+t+".roomArea",function(o){if(o)return e.activeRoomName=e.hostingRoomDetail.hostingRooms[t].name,!1}),e.$refs.hostingRoomDetail.validateField("hostingRooms."+t+".roomDirection",function(o){if(o)return e.activeRoomName=e.hostingRoomDetail.hostingRooms[t].name,!1})},i=0;i<e.hostingRoomDetail.hostingRooms.length;i++)a(i);return e.$message.error("您还有必填信息未填写完全，请全部填写好后再保存"),!1}(t=Object(S.d)(e.hostingRoomDetail)).facilityItems=t.facilityItemsList.join(","),t.tag=t.tag?1:0;var s=t.tag?e.filterManagerList.filter(function(e){return e.id===t.sourceInfo}):"";t.sourceInfo=s.length?s[0].id+","+s[0].name:"",2===t.houseRentType&&t.hostingRooms.forEach(function(e,t){e.facilityItems=e.facilityItemsList.join(","),e.roomAttributes=e.roomAttributesList.join(",")})}),t},openPicModel:function(e){this.curPicListIndex=e,this.currentPicList=-1===e?this.hostingRoomDetail.pictures:this.hostingRoomDetail.hostingRooms[e].pictures,this.uploadPicsModelVisible=!0},uploadModelClose:function(){-1===this.curPicListIndex?this.hostingRoomDetail.pictures=this.currentPicList:this.hostingRoomDetail.hostingRooms[this.curPicListIndex].pictures=this.currentPicList,this.currentPicList=[]},deleteCurRoom:function(e,t){var o=this;e.needCheck?Object(_.e)({roomCodeList:[e.roomCode]}).then(function(t){o.handleTabsEdit(e.name,"remove")}).catch(function(e){console.log(e)}):this.handleTabsEdit(e.name,"remove")},emitDelete:function(e){this.currentPicList=e||[]},emitCropperList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cropperList=e},emitCropperData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach(function(e,t){e.type=1,e.imageName=e.title,e.image=e.src,e.key=e.key||Math.random().toFixed(5),void 0===e.isBase64&&(e.isBase64=1)}),this.currentPicList=[].concat(h()(this.currentPicList),h()(e))},uploadImg:function(e){var t=this;return m()(i.a.mark(function o(){var a,s,n,c,m;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e.target.value){o.next=3;break}return console.log("取消上传..."),o.abrupt("return",!1);case 3:if(a=[],s=function(e){return new r.a(function(t){var o=new FileReader;o.onerror=function(e){console.log("读取异常....")},o.onload=function(o){var a="object"===l()(o.target.result)?window.URL.createObjectURL(new Blob([o.target.result])):o.target.result,i="";i=e.name?e.name.split(".")[0].length<=30?e.name.split(".")[0]:e.name.split(".")[0].substr(0,30):"",t({img:a,imageName:i,type:1})},o.readAsArrayBuffer(e)})},n=e.target.files,!((c=t.currentPicList).length+n.length>15)){o.next=11;break}return t.$message.error("您已上传"+c.length+"张图片，最多还能上传"+(15-c.length)+"张图片"),e.target.value=null,o.abrupt("return",!1);case 11:m=0;case 12:if(!(m<n.length)){o.next=25;break}if(t.accept.includes(n[m].type)){o.next=17;break}return t.$message.error("请上传"+t.accept.replace(/image\//gi,"")+"的图片"),e.target.value=null,o.abrupt("return",!1);case 17:return o.t0=a,o.next=20,s(n[m]);case 20:o.t1=o.sent,o.t0.push.call(o.t0,o.t1);case 22:m++,o.next=12;break;case 25:t.cropperList=a.map(function(e,t){return{img:e.img,imageName:e.imageName,type:e.type}}),e.target.value=null;case 27:case"end":return o.stop()}},o,t)}))()}}}},"4kz6":function(e,t){},"8RAi":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("3cXf"),i=o.n(a),s=o("hRKE"),l=o.n(s),n=o("4YfN"),r=o.n(n),c=o("0xDb"),m=o("twel"),u=o.n(m),h=o("eDc8"),d=o.n(h),p=o("T76A"),g=o.n(p),f=o("c5or"),b=o.n(f),v=o("U4Ig"),y=o.n(v),R=o("QHcW");t.default={name:"hostingList",components:{hostingRoomDetail:u.a,rentPayWay:d.a,areaSelect:g.a,RoomListSelecter:b.a,GridUnit:y.a},filters:{renderStatusType:function(e){return{"可用":"success","在住":"primary","维修":"danger","空脏":"warning","未发布":"info"}[e]||"info"},renderStatusValue:function(e){return e||"未知"},setRoomStatus:function(e,t){var o=t.filter(function(t){return t.value===e});return o.length?o[0].label:""}},data:function(){return{checkedList:[],tableCheckboxList:[],roomSearchForm:{cityId:"",cityArea:[],houseType:"",roomStatus:"",orgName:"",subdistrictName:"",roomCode:"",houseRentType:1},houseRentTypeList:["整租","合租"],activeName:"整租",tableHeight:400,houstingListUrl:"/market/fangyuan",method:"queryHostingList",selectedRooms:[],houseTypeList:[{label:"普通",value:1},{label:"金融",value:2},{label:"飞虎队",value:3}],roomStatusList:[{label:"可用",value:2},{label:"下单未入住",value:3},{label:"在住",value:4},{label:"维修",value:5},{label:"空脏",value:6},{label:"保留",value:7},{label:"预定",value:8},{label:"已出租（无租客）",value:9},{label:"装修中",value:10}],colModels:[{label:"#",slotName:"index",fixed:"left",width:50,align:"center"},{prop:"checkHoleRooms",label:"",slotName:"checkHoleRooms",width:50},{prop:"orgName",label:"组织名称",width:200},{prop:"addrRegionName",label:"房源位置",width:180},{prop:"roomDetailAddress",label:"公寓/小区-房间",width:180},{prop:"tags",label:"房源类型",slotName:"tags",width:130},{slot:"selection"},{prop:"roomName",label:"房间"},{prop:"roomStatus",label:"房间状态",slotName:"roomStatus",width:150},{prop:"roomCode",label:"平台房源编码"},{prop:"operate",label:"设置",slotName:"operateHosting",width:"340",fixed:"right"},{prop:"provider",label:"房源提供者",width:100},{prop:"operateRecord",label:"操作记录",slotName:"operateRecordStr",width:220}],roomDetailModelVisible:!1,rentPayModelVisible:!1,activeRentPayTabName:"0",tempRentPayTabName:"0",tempRentPayList:[],rentPayList:[],baseRentTypeList:[],curRoomFinanceType:1,copyItemsModelVisible:!1,copyOptions:[{label:"收租方式",val:2},{label:"线下支付方式",val:3},{label:"合同模式",val:5},{label:"能耗费用",val:6},{label:"交租方式",val:1,showRoomSelect:!0},{label:"房源照片",val:7,showRoomSelect:!0}],checkAllCopyItem:!1,checkedCopyList:[],copyItemsRooms:[],copyItemRoomList:[],roomSelectList:[],copyItemsParams:{rentTypeRoomCode:"",pictureRoomCode:""},selectedCopyItemsRooms:[],curFangyuanCode:"",isEditFlag:!1}},computed:{allCheckedOptionsList:function(){return this.copyOptions.map(function(e){return e.val})},cityArea:function(){return this.roomSearchForm.cityArea}},watch:{roomSearchForm:{handler:function(e){this.roomSearchForm.cityArea&&this.roomSearchForm.cityArea[1]?this.roomSearchForm.cityId=this.roomSearchForm.cityArea[1]:this.roomSearchForm.cityId=""}},cityArea:function(e){e&&e[1]?this.roomSearchForm.cityId=e[1]:this.roomSearchForm.cityId=""}},methods:{searchParam:function(){var e=this;this.roomSearchForm.houseRentType="整租"===this.activeName?1:2,this.$nextTick(function(){e.$refs.hostingHouseList.searchHandler()})},handleClickTab:function(e){this.searchParam("clear"),this.roomSearchForm={cityId:"",cityArea:[],houseType:"",roomStatus:"",orgName:"",subdistrictName:"",roomCode:"",houseRentType:"整租"===this.activeName?1:2}},handleCheckHoleRooms:function(e,t){for(var o=0;o<e.spanArr;o++)this.tableCheckboxList[t+o].isChecked=this.checkedList[t],this.$refs.hostingHouseList.$refs.gridUnit.toggleRowSelection(this.$refs.hostingHouseList.tableData[t+o],this.checkedList[t])},searchHostingHouseList:function(e){if("clear"===e)for(var t in this.roomSearchForm)this.roomSearchForm[t]="cityArea"===t?[]:"";this.searchParam()},handleSelectChange:function(e,t){var o=this.$refs.hostingHouseList.tableData.indexOf(t);if(this.tableCheckboxList[o].isChecked=!this.tableCheckboxList[o].isChecked,this.tableCheckboxList[o].isChecked){var a=this.tableCheckboxList.filter(function(e){return e.fangyuanCode===t.fangyuanCode&&e.isChecked});if(a.length===this.tableCheckboxList[o].columnLength){var i=this.tableCheckboxList.indexOf(a[0]);this.checkedList[i]=!0}}else{var s=this.tableCheckboxList.filter(function(e){return e.fangyuanCode===t.fangyuanCode}),l=this.tableCheckboxList.indexOf(s[0]);this.checkedList[l]=!1}},handleSelectionChange:function(e){var t=this;if(this.selectedRooms=e,e.length===this.checkedList.length){var o=[];this.checkedList.forEach(function(e,a){t.tableCheckboxList[a].isChecked=!0,o.push(!0)}),this.$set(this,"checkedList",o)}if(0===e.length){var a=[];this.checkedList.forEach(function(e,o){t.tableCheckboxList[o].isChecked=!1,a.push(!1)}),this.$set(this,"checkedList",a)}},handleCommand:function(e){var t=this,o={};if("number"==typeof e){if(!this.selectedRooms.length)return void this.$message.error("请选择需要设置房态的房间");o={roomCodes:this.selectedRooms.map(function(e){return e.roomCode}),roomStatus:e,resource:this.roomSearchForm.houseRentType}}else o=e;Object(R.b)(o).then(function(e){if("0"===e.code){var a={};if(e.data.success===o.roomCodes.length)a={message:e.message,type:"success"};else if(e.data.fail===o.roomCodes.length)a={message:"失败"+e.data.fail+"个房间",type:"error"};else{var i=2===o.roomStatus?"空房":"已出租无租客";a={message:"成功"+e.data.success+"个房间，失败"+e.data.fail+"个房间，"+e.data.already+"个房间已经是"+i+"状态"}}t.$message(a),t.searchParam()}}).catch(function(e){console.log(e)})},deleteRoom:function(e){var t=this,o=this.$createElement,a=1===this.roomSearchForm.houseRentType?"":"若删除单个房间请在【编辑房间】里面删除";this.$msgbox({title:"确认消息",message:o("p",null,[o("span",null,"确定删除整套房间吗？ "),o("span",{style:"color: red"},a)]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(o){Object(R.h)({fangyuanCode:e.fangyuanCode}).then(function(e){"0"===e.code&&(t.$message({message:e.message,type:"success"}),t.$refs.hostingHouseList.fetchHandler())}).catch(function(e){console.log(e)})})},objectSpanMethod:function(e){var t=e.row,o=(e.column,e.rowIndex,e.columnIndex);if(2===this.roomSearchForm.houseRentType&&(o<5||11===o))return t.spanArr<1?{rowspan:0,colspan:0}:{rowspan:t.spanArr,colspan:1}},dataHandler:function(e){var t=this,o=[];return this.tableCheckboxList=[],this.checkedList=[],(e=e.filter(function(e){return e.roomList.length>0})).forEach(function(e,a){e.roomList.forEach(function(i,s){"整租"===t.activeName&&(i.roomName="整套房间");var l=r()({},e,i);t.tableCheckboxList.push({fangyuanCode:e.fangyuanCode,isChecked:!1,columnLength:e.roomList.length}),t.checkedList.push(!1),0===s&&(l.spanArr=e.roomList.length,l.index=a),o.push(l)})}),o},openRoomDetail:function(e){var t=this;this.loading=!0,"number"==typeof e?(this.isEditFlag=!1,this.roomDetailModelVisible=!0,this.$nextTick(function(){var o={areaCode:["","",""],provinceId:null,cityId:null,regionId:null,zoneId:null,zoneName:"",address:"",regionAddressId:"",buildingName:"",unitCode:"",roomNo:"",chamberCount:null,boardCount:null,toiletCount:null,houseArea:null,houseDirection:null,decorationDegree:null,floorName:"",floorAmount:null,contactName:"",contactGender:1,contactMobile:null,facilityItemsList:[],houseDesc:"",orgId:"",adminUserId:null,accountName:"",tag:!1,sourceInfo:"",houseRentType:e};1===e?o.pictures=[]:o.hostingRooms=[{roomArea:"",roomAttributesList:[],roomName:"房间A",name:"1",pictures:[],facilityItemsList:[]}],t.$refs.hostingRoomDetail.setRoomDetailData(o)})):"object"===(void 0===e?"undefined":l()(e))&&Object(R.t)({fangyuanCode:e.fangyuanCode}).then(function(e){if("0"===e.code){t.isEditFlag=!0;var o=e.data;o.areaCode=[o.provinceId,o.cityId,o.regionId],o.address=o.subdistrictName?o.subdistrictName+" - "+o.subdistrictAddress:"",o.facilityItemsList=o.facilityItems?o.facilityItems.split(","):[],o.tag=1===o.tag,o.houseDesc=o.houseDesc||"",1===o.houseRentType&&(o.pictures=o.pictures||[]),o.hostingRooms.forEach(function(e,t){e.name=++t+"",e.facilityItemsList=e.facilityItems?e.facilityItems.split(","):[],e.roomAttributesList=e.roomAttributes?e.roomAttributes.split(","):[],e.pictures=e.pictures||[],e.needCheck=!0}),o.isEditFlag=!0,t.roomDetailModelVisible=!0,t.$nextTick(function(){t.$refs.hostingRoomDetail.setRoomDetailData(o)})}})},saveRoomDetailData:function(e){var t=this;if("clear"===e)return this.roomDetailModelVisible=!1,!1;var o=this.$refs.hostingRoomDetail.returnRoomDetailData();if(!o)return!1;var a=o.isEditFlag?R.s:R.w;console.log(o),a({hostingHouseInfo:i()(o)}).then(function(a){"0"===a.code&&(t.$message({message:a.message,type:"success"}),"add"===e?(1===o.houseRentType?o.pictures=[]:o.hostingRooms=[{roomArea:"",roomAttributes:"",roomAttributesList:[],roomName:"房间A",name:"1",pictures:[],facilityItemsList:[]}],o.roomNo="",t.$refs.hostingRoomDetail.setRoomDetailData(o)):t.roomDetailModelVisible=!1,t.$refs.hostingHouseList.fetchHandler())})},checkEditStatus:function(e){this.$refs.hostingRoomDetail.checkEditFlag()?this.$confirm("您还有数据未保存, 确认关闭吗？").then(function(t){e()}).catch(function(e){}):e()},openRentPayModel:function(e){var t=this;Object(R.u)({fangyuanCode:e.fangyuanCode}).then(function(e){e.data.hostingRoomRentType.forEach(function(e,t){e.roomRentTypeList.forEach(function(e,t){2===e.type&&(e.serviceFeeType=e.serviceFeeType||1,e.serviceChargeType=e.serviceChargeType||1)})}),t.curRoomFinanceType=e.data.houseFinanceType,t.rentPayList=e.data.hostingRoomRentType,t.baseRentTypeList=e.data.baseRentTypeList,t.rentPayModelVisible=!0,"合租"===t.activeName&&(t.activeRentPayTabName="0",t.tempRentPayTabName="0",t.tempRentPayList=Object(c.d)(e.data.hostingRoomRentType[0].roomRentTypeList))})},checkRentPaySaveStatus:function(){var e=this,t=this.activeRentPayTabName,o=this.$refs.rentPayWay[Number(this.tempRentPayTabName)].returnRentPayList();o&&i()(this.tempRentPayList)===i()(o)?(this.tempRentPayTabName=t,this.tempRentPayList=Object(c.d)(this.rentPayList[Number(t)].roomRentTypeList)):(this.$nextTick(function(){e.activeRentPayTabName=e.tempRentPayTabName}),this.$confirm("切换房间会放弃当前的修改，是否确认切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$refs.rentPayWay[Number(e.tempRentPayTabName)].resetForm(e.rentPayList[Number(e.tempRentPayTabName)].roomRentTypeList),e.activeRentPayTabName=t,e.tempRentPayTabName=t,e.tempRentPayList=Object(c.d)(e.rentPayList[Number(t)].roomRentTypeList)}).catch(function(e){console.log(e)}))},saveEstateRoomRentPayWay:function(){var e=this,t="整租"===this.activeName?this.$refs.rentPayWay.returnRentPayList():this.$refs.rentPayWay[Number(this.activeRentPayTabName)].returnRentPayList();if(!t)return this.$message.error("请填写完交租方式再保存"),!1;Object(R.H)({roomCode:this.rentPayList["整租"===this.activeName?0:Number(this.activeRentPayTabName)].roomCode,roomRentTypeList:t}).then(function(t){if("0"===t.code){if(e.$message({message:t.message,type:"success"}),"合租"===e.activeName){var o=e.$refs.rentPayWay[Number(e.tempRentPayTabName)].returnRentPayList();e.rentPayList[Number(e.tempRentPayTabName)].roomRentTypeList=Object(c.d)(o),e.tempRentPayList=Object(c.d)(o)}var a="整租"===e.activeName?e.$refs.rentPayWay:e.$refs.rentPayWay[Number(e.activeRentPayTabName)];a.$refs.financeRentPayForm.clearValidate(),a.$refs.defaultRentPayForm.clearValidate()}}).catch(function(e){console.log(e)})},openCopyItemsModel:function(e){var t=this;this.curFangyuanCode=e.fangyuanCode,Object(R.r)({fangyuanCode:e.fangyuanCode}).then(function(o){t.copyItemsRooms=o.data;var a=t.$refs.hostingHouseList.tableData.filter(function(t){return t.fangyuanCode===e.fangyuanCode});t.roomSelectList=a?a[0].roomList:[],t.copyItemsParams.rentTypeRoomCode=t.roomSelectList[0].roomCode,t.copyItemsParams.pictureRoomCode=t.roomSelectList[0].roomCode,t.checkedCopyList=[],t.handleOptionsChange(),t.copyItemsModelVisible=!0})},saveCopyItems:function(){var e=this,t={fromFangyuanCode:this.curFangyuanCode,toFangyuanCodes:this.$refs.copyItemTo.returnCheckedList(),items:this.checkedCopyList};this.checkedCopyList.includes(1)&&(t.rentTypeRoomCode=this.copyItemsParams.rentTypeRoomCode),this.checkedCopyList.includes(7)&&(t.pictureRoomCode=this.copyItemsParams.pictureRoomCode),Object(R.v)(t).then(function(t){"0"===t.code&&(e.$message({message:t.message,type:"success"}),e.copyItemsModelVisible=!1)}).catch(function(e){console.log(e)})},handleCheckAllChange:function(e){this.checkedCopyList=e?this.allCheckedOptionsList:[]},handleOptionsChange:function(){this.checkAllCopyItem=this.checkedCopyList.length===this.allCheckedOptionsList.length}},mounted:function(){var e=this,t=Object(c.c)(function(){e.tableHeight=Math.max(document.body.clientHeight-340,250)},100);t(),window.addEventListener("resize",t)},beforeDestroy:function(){var e=document.querySelectorAll("body > .el-dialog__wrapper");e&&[].forEach.call(e,function(e,t){document.body.removeChild(e)})}}},NbDi:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return"{}"!==JSON.stringify(e.hostingRoomDetail)?o("el-form",{ref:"hostingRoomDetail",staticClass:"room-detail-container hosting-room-detail",attrs:{model:e.hostingRoomDetail,rules:e.hostingRoomDetailRules,"label-width":"90px",size:"small"}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"所在地区",prop:"areaCode"}},[o("area-select",{ref:"areaSelect",attrs:{level:1},on:{input:function(t){e.searchZoneList(!1)}},model:{value:e.hostingRoomDetail.areaCode,callback:function(t){e.$set(e.hostingRoomDetail,"areaCode",t)},expression:"hostingRoomDetail.areaCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:"所属板块",prop:"zoneId",rules:{required:e.zoneList.length>0,message:"请选择所属板块",trigger:"change"}}},[o("el-select",{staticClass:"room-detail-select",attrs:{placeholder:e.zoneList.length?"请选择":"无"},model:{value:e.hostingRoomDetail.zoneId,callback:function(t){e.$set(e.hostingRoomDetail,"zoneId",t)},expression:"hostingRoomDetail.zoneId"}},e._l(e.zoneList,function(e){return o("el-option",{key:e.zoneId,attrs:{label:e.zoneName,value:e.zoneId}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:9}},[o("el-form-item",{attrs:{label:"公寓/小区",prop:"address"}},[o("map-select",{attrs:{areaCode:e.hostingRoomDetail.areaCode,value:e.hostingRoomDetail.address},on:{addressChange:e.addressChange}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"楼幢",prop:"buildingName"}},[o("el-input",{model:{value:e.hostingRoomDetail.buildingName,callback:function(t){e.$set(e.hostingRoomDetail,"buildingName",t)},expression:"hostingRoomDetail.buildingName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:"单元"}},[o("el-input",{model:{value:e.hostingRoomDetail.unitCode,callback:function(t){e.$set(e.hostingRoomDetail,"unitCode",t)},expression:"hostingRoomDetail.unitCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"室",prop:"roomNo"}},[o("el-input",{model:{value:e.hostingRoomDetail.roomNo,callback:function(t){e.$set(e.hostingRoomDetail,"roomNo",t)},expression:"hostingRoomDetail.roomNo"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:10}},[o("el-form-item",{staticClass:"room-count",attrs:{label:"户型",prop:"chamberCount","show-message":!1}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:4}},[o("el-form-item",{staticClass:"room-item-count",attrs:{label:"",prop:"chamberCount"}},[o("el-input",{attrs:{type:"number"},model:{value:e.hostingRoomDetail.chamberCount,callback:function(t){e.$set(e.hostingRoomDetail,"chamberCount",t)},expression:"hostingRoomDetail.chamberCount"}})],1)],1),e._v(" "),o("el-col",{staticClass:"room-count-text",attrs:{span:2}},[e._v("\n            室\n          ")]),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-form-item",{staticClass:"room-item-count",attrs:{label:"",prop:"boardCount"}},[o("el-input",{attrs:{type:"number"},model:{value:e.hostingRoomDetail.boardCount,callback:function(t){e.$set(e.hostingRoomDetail,"boardCount",t)},expression:"hostingRoomDetail.boardCount"}})],1)],1),e._v(" "),o("el-col",{staticClass:"room-count-text",attrs:{span:2}},[e._v("\n            厅\n          ")]),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-form-item",{staticClass:"room-item-count",attrs:{label:"",prop:"toiletCount"}},[o("el-input",{attrs:{type:"number"},model:{value:e.hostingRoomDetail.toiletCount,callback:function(t){e.$set(e.hostingRoomDetail,"toiletCount",t)},expression:"hostingRoomDetail.toiletCount"}})],1)],1),e._v(" "),o("el-col",{staticClass:"room-count-text",attrs:{span:2}},[e._v("\n            卫\n          ")]),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-form-item",{staticClass:"room-item-count",attrs:{label:"",prop:"houseArea"}},[o("el-input",{attrs:{type:"number"},model:{value:e.hostingRoomDetail.houseArea,callback:function(t){e.$set(e.hostingRoomDetail,"houseArea",t)},expression:"hostingRoomDetail.houseArea"}})],1)],1),e._v(" "),o("el-col",{staticClass:"room-count-text",attrs:{span:2}},[e._v("\n            m\n            "),o("sup",[e._v("2")])])],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:3}},[o("el-form-item",{attrs:{"label-width":"0",prop:"houseDirection"}},[o("el-select",{staticClass:"room-detail-select",attrs:{placeholder:"朝向"},model:{value:e.hostingRoomDetail.houseDirection,callback:function(t){e.$set(e.hostingRoomDetail,"houseDirection",t)},expression:"hostingRoomDetail.houseDirection"}},e._l(e.roomDirectionList,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:3}},[o("el-form-item",{attrs:{"label-width":"0",prop:"decorationDegree"}},[o("el-select",{staticClass:"room-detail-select",attrs:{placeholder:"装修程度"},model:{value:e.hostingRoomDetail.decorationDegree,callback:function(t){e.$set(e.hostingRoomDetail,"decorationDegree",t)},expression:"hostingRoomDetail.decorationDegree"}},e._l(e.decorationDegreeList,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),o("el-col",{staticClass:"room-detail-floor-container",attrs:{span:8}},[o("el-form-item",{attrs:{label:"层高","label-width":"50px",prop:"floorName"}},[o("el-input",{staticClass:"room-detail-floor-input",attrs:{type:"number"},model:{value:e.hostingRoomDetail.floorName,callback:function(t){e.$set(e.hostingRoomDetail,"floorName",t)},expression:"hostingRoomDetail.floorName"}},[o("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("所在层")])],2)],1),e._v(" "),o("el-form-item",{attrs:{"label-width":"0",prop:"floorAmount"}},[o("el-input",{staticClass:"room-detail-floor-input",attrs:{type:"number"},model:{value:e.hostingRoomDetail.floorAmount,callback:function(t){e.$set(e.hostingRoomDetail,"floorAmount",t)},expression:"hostingRoomDetail.floorAmount"}},[o("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("总楼层")])],2)],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"看房电话",prop:"contactName"}},[o("el-input",{attrs:{placeholder:"联系人"},model:{value:e.hostingRoomDetail.contactName,callback:function(t){e.$set(e.hostingRoomDetail,"contactName",t)},expression:"hostingRoomDetail.contactName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:3}},[o("el-form-item",{attrs:{"label-width":"0"}},[o("el-select",{model:{value:e.hostingRoomDetail.contactGender,callback:function(t){e.$set(e.hostingRoomDetail,"contactGender",t)},expression:"hostingRoomDetail.contactGender"}},[o("el-option",{attrs:{label:"先生",value:1}}),e._v(" "),o("el-option",{attrs:{label:"女士",value:2}})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-form-item",{attrs:{"label-width":"0",prop:"contactMobile"}},[o("el-input",{attrs:{placeholder:"联系电话"},model:{value:e.hostingRoomDetail.contactMobile,callback:function(t){e.$set(e.hostingRoomDetail,"contactMobile",t)},expression:"hostingRoomDetail.contactMobile"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:4}},[1===e.hostingRoomDetail.houseRentType?o("el-form-item",{attrs:{label:"房间照片"}},[o("el-badge",{attrs:{value:e.hostingRoomDetail.pictures.length}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.openPicModel(-1)}}},[e._v("上传照片")])],1)],1):e._e()],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:13}},[o("el-form-item",{attrs:{label:1===e.hostingRoomDetail.houseRentType?"公区设施":"房间设施"}},[o("el-select",{staticClass:"room-detail-select",attrs:{multiple:"",placeholder:"请选择"},model:{value:e.hostingRoomDetail.facilityItemsList,callback:function(t){e.$set(e.hostingRoomDetail,"facilityItemsList",t)},expression:"hostingRoomDetail.facilityItemsList"}},e._l(e.facilityGroup,function(t){return o("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.facilitys,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"房源描述",prop:"houseDesc"}},[o("el-input",{attrs:{type:"textarea",placeholder:"最多可输入150个字",rows:2},model:{value:e.hostingRoomDetail.houseDesc,callback:function(t){e.$set(e.hostingRoomDetail,"houseDesc",t)},expression:"hostingRoomDetail.houseDesc"}}),e._v(" "),o("span",{staticClass:"estate-iontro-length-tips"},[e._v(e._s(e.hostingRoomDetail.houseDesc.length)+"/150")])],1)],1)],1),e._v(" "),2===e.hostingRoomDetail.houseRentType?[o("el-tabs",{staticClass:"sub-room-info-list",attrs:{type:"border-card",addable:e.hostingRoomDetail.hostingRooms.length<26},on:{edit:e.handleTabsEdit},model:{value:e.activeRoomName,callback:function(t){e.activeRoomName=t},expression:"activeRoomName"}},e._l(e.hostingRoomDetail.hostingRooms,function(t,a){return o("el-tab-pane",{key:t.roomName,attrs:{name:t.name}},[o("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.roomName)+"\n          "),o("i",{directives:[{name:"show",rawName:"v-show",value:a===e.hostingRoomDetail.hostingRooms.length-1&&a>0,expression:"index === hostingRoomDetail.hostingRooms.length - 1 && index > 0"}],staticClass:"el-icon-delete",on:{click:function(o){e.deleteCurRoom(t,a)}}})]),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[o("el-form-item",{staticClass:"room-count",attrs:{"label-width":"0"}},[o("el-row",[o("el-col",{attrs:{span:19}},[o("el-form-item",{staticClass:"room-item-count",attrs:{label:"房间面积",prop:"hostingRooms."+a+".roomArea",rules:e.hostingRoomDetailRules.roomDetail.roomArea}},[o("el-input",{attrs:{type:"number"},model:{value:e.hostingRoomDetail.hostingRooms[a].roomArea,callback:function(t){e.$set(e.hostingRoomDetail.hostingRooms[a],"roomArea",t)},expression:"hostingRoomDetail.hostingRooms[index].roomArea"}})],1)],1),e._v(" "),o("el-col",{staticClass:"room-count-text",attrs:{span:5}},[e._v("\n                  m\n                  "),o("sup",[e._v("2")])])],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-form-item",{attrs:{"label-width":"0",prop:"hostingRooms."+a+".roomDirection",rules:e.hostingRoomDetailRules.roomDetail.roomDirection}},[o("el-select",{staticClass:"room-detail-select",attrs:{placeholder:"房间朝向"},model:{value:e.hostingRoomDetail.hostingRooms[a].roomDirection,callback:function(t){e.$set(e.hostingRoomDetail.hostingRooms[a],"roomDirection",t)},expression:"hostingRoomDetail.hostingRooms[index].roomDirection"}},e._l(e.roomDirectionList,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:"房间照片",prop:""}},[o("el-badge",{attrs:{value:e.hostingRoomDetail.hostingRooms[a].pictures?e.hostingRoomDetail.hostingRooms[a].pictures.length:0}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.openPicModel(a)}}},[e._v("上传照片")])],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"0",prop:""}},[o("el-checkbox-group",{model:{value:e.hostingRoomDetail.hostingRooms[a].roomAttributesList,callback:function(t){e.$set(e.hostingRoomDetail.hostingRooms[a],"roomAttributesList",t)},expression:"hostingRoomDetail.hostingRooms[index].roomAttributesList"}},[o("el-checkbox",{staticClass:"room-attributes",attrs:{label:"1"}},[e._v("独立卫生间")]),e._v(" "),o("el-checkbox",{staticClass:"room-attributes",attrs:{label:"2"}},[e._v("独立阳台")]),e._v(" "),o("el-checkbox",{staticClass:"room-attributes",attrs:{label:"3"}},[e._v("独立厨房")]),e._v(" "),o("el-checkbox",{staticClass:"room-attributes",attrs:{label:"4"}},[e._v("飘窗")])],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:13}},[o("el-form-item",{attrs:{label:"房间设施"}},[o("el-select",{staticClass:"room-detail-select",attrs:{multiple:"",placeholder:"请选择"},model:{value:e.hostingRoomDetail.hostingRooms[a].facilityItemsList,callback:function(t){e.$set(e.hostingRoomDetail.hostingRooms[a],"facilityItemsList",t)},expression:"hostingRoomDetail.hostingRooms[index].facilityItemsList"}},e._l(e.roomFacilityGroup,function(t){return o("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.facilitys,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1)],1)],1)],1)}))]:e._e(),e._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"110px",label:"房源管理权限",prop:"orgId"}},[o("el-select",{staticClass:"estate-model-select",attrs:{filterable:"",remote:"",clearable:!0,placeholder:"组织名称","remote-method":e.searchOrgListByKeywords,loading:e.loading,disabled:e.hostingRoomDetail.isEditFlag},on:{clear:e.setOrg},model:{value:e.hostingRoomDetail.orgId,callback:function(t){e.$set(e.hostingRoomDetail,"orgId",t)},expression:"hostingRoomDetail.orgId"}},e._l(e.orgList,function(t){return o("el-option",{key:t.ordId,attrs:{value:t.orgId,label:t.orgName},nativeOn:{click:function(o){e.setOrg(t)}}},[o("span",{staticStyle:{float:"left"}},[e._v(e._s(t.orgName))]),e._v(" "),o("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.adminMobile))])])}))],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{"label-width":"0"}},[o("el-input",{attrs:{placeholder:"账号名",disabled:!0},model:{value:e.hostingRoomDetail.accountName,callback:function(t){e.$set(e.hostingRoomDetail,"accountName",t)},expression:"hostingRoomDetail.accountName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:3}},[o("el-form-item",{attrs:{"label-width":"30px",prop:"tag"}},[o("el-checkbox",{attrs:{label:"飞虎队",name:"type"},on:{change:e.handleSourceInfo},model:{value:e.hostingRoomDetail.tag,callback:function(t){e.$set(e.hostingRoomDetail,"tag",t)},expression:"hostingRoomDetail.tag"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[e.hostingRoomDetail.tag?o("el-form-item",{attrs:{"label-width":"0",prop:"sourceInfo"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",placeholder:"房源提供者","remote-method":e.fetchFlyTigerList,loading:e.loading,clearable:!0,size:"small"},model:{value:e.hostingRoomDetail.sourceInfo,callback:function(t){e.$set(e.hostingRoomDetail,"sourceInfo",t)},expression:"hostingRoomDetail.sourceInfo"}},e._l(e.filterManagerList,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[o("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),o("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.mobile))])])}))],1):e._e()],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"上传房间照片",visible:e.uploadPicsModelVisible,"append-to-body":!0,"custom-class":"upload-pics-model",width:"600px"},on:{"update:visible":function(t){e.uploadPicsModelVisible=t},close:e.uploadModelClose}},[o("div",{staticClass:"previewItems"},[o("Preview",{attrs:{"pic-list":e.currentPicList,"delete-icon":"delete",disabled:""},on:{emitDelete:e.emitDelete}}),e._v(" "),o("label",{staticClass:"el-upload el-upload--picture-card uploadImage",attrs:{for:"uploadImages"}},[o("i",{staticClass:"el-icon-plus"}),e._v(" "),o("input",{attrs:{type:"file",id:"uploadImages",accept:e.accept,multiple:""},on:{change:function(t){e.uploadImg(t)}}})])],1),e._v(" "),o("p",{staticClass:"upload-pics-info"},[e._v("温馨提示： ")]),e._v(" "),o("p",{staticClass:"upload-pics-info"},[e._v("1.请勿上传虚假、模糊、与房源信息无关、含有其他公司水印的照片； ")]),e._v(" "),o("p",{staticClass:"upload-pics-info"},[e._v("2.房间照片最佳组合：卧室2~6张、公共区域1~4张、厨房1~3张、卫生间1-4张； ")]),e._v(" "),o("p",{staticClass:"upload-pics-info"},[e._v("3.目前最多支持15张，支持JPG/JPEG/PNG，可以拖动图片进行排序，支持批量上传。")]),e._v(" "),o("ImageCropper",{attrs:{cropperList:e.cropperList},on:{emitCropperList:e.emitCropperList,emitCropperData:e.emitCropperData}}),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.uploadPicsModelVisible=!1}}},[e._v("关 闭")])],1)],1)],2):e._e()},staticRenderFns:[]}},PzPI:function(e,t){},XJUA:function(e,t,o){var a=o("Alxp")(o("8RAi"),o("zslw"),function(e){o("PzPI")},"data-v-2386de8c",null);e.exports=a.exports},twel:function(e,t,o){var a=o("Alxp")(o("/azh"),o("NbDi"),function(e){o("4kz6")},"data-v-722b2b5b",null);e.exports=a.exports},zslw:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.houseRentTypeList,function(e,t){return o("el-tab-pane",{key:t,attrs:{label:e,name:e}})}),e._v(" "),o("el-form",{attrs:{model:e.roomSearchForm,size:"small",inline:!0}},[o("el-form-item",[o("area-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择城市",filterable:!0,showAllLevels:!1,level:0},model:{value:e.roomSearchForm.cityArea,callback:function(t){e.$set(e.roomSearchForm,"cityArea",t)},expression:"roomSearchForm.cityArea"}})],1),e._v(" "),o("el-form-item",[o("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",clearable:"",size:"small",placeholder:"房源类型"},model:{value:e.roomSearchForm.houseType,callback:function(t){e.$set(e.roomSearchForm,"houseType",t)},expression:"roomSearchForm.houseType"}},e._l(e.houseTypeList,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("el-form-item",[o("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",clearable:"",size:"small",placeholder:"房间状态"},model:{value:e.roomSearchForm.roomStatus,callback:function(t){e.$set(e.roomSearchForm,"roomStatus",t)},expression:"roomSearchForm.roomStatus"}},e._l(e.roomStatusList,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("el-form-item",[o("el-input",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"组织名称"},model:{value:e.roomSearchForm.orgName,callback:function(t){e.$set(e.roomSearchForm,"orgName",t)},expression:"roomSearchForm.orgName"}}),e._v(" "),o("el-input",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{size:"small",placeholder:"公寓/小区"},model:{value:e.roomSearchForm.subdistrictName,callback:function(t){e.$set(e.roomSearchForm,"subdistrictName",t)},expression:"roomSearchForm.subdistrictName"}}),e._v(" "),o("el-input",{staticClass:"deal",staticStyle:{width:"120px","margin-left":"10px"},attrs:{size:"small",placeholder:"房源编码"},model:{value:e.roomSearchForm.roomCode,callback:function(t){e.$set(e.roomSearchForm,"roomCode",t)},expression:"roomSearchForm.roomCode"}})],1),e._v(" "),o("el-form-item",{staticClass:"house-search-form-group"},[o("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.searchHostingHouseList("search")}}},[e._v("查询")]),e._v(" "),o("el-button",{attrs:{icon:"el-icon-remove-outline"},on:{click:function(t){e.searchHostingHouseList("clear")}}},[e._v("清空")])],1),e._v(" "),o("div",[o("el-form-item",[o("el-dropdown",{staticClass:"room-options-dropdown",on:{command:e.handleCommand}},[o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",plain:"",size:"small"}},[e._v("批量房态管理")]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:2}},[e._v("空房")]),e._v(" "),o("el-dropdown-item",{attrs:{command:9}},[e._v("已出租无租客")])],1)],1),e._v(" "),o("el-button",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{type:"primary",plain:""},on:{click:function(t){e.openRoomDetail(2)}}},[e._v("添加合租房源")]),e._v(" "),o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",plain:""},on:{click:function(t){e.openRoomDetail(1)}}},[e._v("添加整租房源")])],1)],1)],1),e._v(" "),o("GridUnit",{ref:"hostingHouseList",attrs:{showRowIndex:!1,spanMethod:e.objectSpanMethod,formOptions:e.roomSearchForm,url:e.houstingListUrl,dataMethod:e.method,listField:"data.houseList",totalField:"data.record",columns:e.colModels,height:e.tableHeight,showSelection:!0,dataHandler:e.dataHandler,pageSizes:[50,100,200],border:"合租"===e.activeName},on:{"selection-change":e.handleSelectionChange,select:e.handleSelectChange},scopedSlots:e._u([{key:"index",fn:function(t){return[e._v("\n        "+e._s(t.row.index+1)+"\n      ")]}},{key:"checkHoleRooms",fn:function(t){return[o("el-checkbox",{on:{change:function(o){e.handleCheckHoleRooms(t.row,t.$index)}},model:{value:e.checkedList[t.$index],callback:function(o){e.$set(e.checkedList,t.$index,o)},expression:"checkedList[scope.$index]"}})]}},{key:"roomStatus",fn:function(t){return[o("el-tag",{attrs:{type:[2].includes(t.row.roomStatus)?"success":[5,6,8,10].includes(t.row.roomStatus)?"info":"danger"}},[e._v(e._s(e._f("setRoomStatus")(t.row.roomStatus,e.roomStatusList)))])]}},{key:"tags",fn:function(t){return e._l(t.row.tags,function(t,a){return o("el-tag",{key:a,staticClass:"romm-type-tags",attrs:{label:t}},[e._v(e._s(t))])})}},{key:"operateHosting",fn:function(t){return[o("el-row",[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){e.openRentPayModel(t.row)}}},[e._v("交租方式")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){e.openCopyItemsModel(t.row)}}},[e._v("复制到")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){e.openRoomDetail(t.row)}}},[e._v("编辑房间")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){e.deleteRoom(t.row)}}},[e._v("删除")])],1)]}},{key:"operateRecordStr",fn:function(t){return[o("p",[e._v(e._s(t.row.operator)+" "+e._s(t.row.operateTime))])]}}])},[o("el-table-column",{attrs:{slot:"selection",type:"selection",width:"50px",align:"center","class-name":"room-list-selection-td"},slot:"selection"})],1)],2),e._v(" "),o("el-dialog",{attrs:{title:e.isEditFlag?"编辑房间":"添加房源",visible:e.roomDetailModelVisible,"before-close":e.checkEditStatus,width:"1000px"},on:{"update:visible":function(t){e.roomDetailModelVisible=t}}},[o("hosting-room-detail",{ref:"hostingRoomDetail"}),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isEditFlag?e._e():o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.saveRoomDetailData("add")}}},[e._v("保存并继续添加")]),e._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.saveRoomDetailData("close")}}},[e._v(e._s(e.isEditFlag?"保 存":"保存并关闭"))]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:function(t){e.saveRoomDetailData("clear")}}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"交租方式",visible:e.rentPayModelVisible,width:2!==e.curRoomFinanceType?"1030px":"630px"},on:{"update:visible":function(t){e.rentPayModelVisible=t}}},["合租"===e.activeName?o("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.checkRentPaySaveStatus},model:{value:e.activeRentPayTabName,callback:function(t){e.activeRentPayTabName=t},expression:"activeRentPayTabName"}},e._l(e.rentPayList,function(t,a){return o("el-tab-pane",{key:a,attrs:{label:t.roomName,name:a.toString()}},[o("rent-pay-way",{ref:"rentPayWay",refInFor:!0,attrs:{list:e.rentPayList[a].roomRentTypeList,curRoomFinanceType:e.curRoomFinanceType,baseRentTypeList:e.baseRentTypeList}})],1)})):"整租"===e.activeName&&e.rentPayList.length?o("rent-pay-way",{ref:"rentPayWay",attrs:{list:e.rentPayList[0].roomRentTypeList,curRoomFinanceType:e.curRoomFinanceType,baseRentTypeList:e.baseRentTypeList}}):e._e(),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveEstateRoomRentPayWay}},[e._v("保 存")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:function(t){e.rentPayModelVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{staticClass:"copy-items-model",attrs:{title:"复制到",visible:e.copyItemsModelVisible,width:"600px"},on:{"update:visible":function(t){e.copyItemsModelVisible=t}}},[o("room-list-selecter",{ref:"copyItemTo",attrs:{roomList:e.copyItemsRooms,visible:e.copyItemsModelVisible}},[o("el-card",{staticClass:"head-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[o("div",{attrs:{slot:"content"},slot:"content"},[e._v("选择复制您要的内容，再选择您要编辑的房间，"),o("br"),e._v("这样可以方便您快速批量编辑同类房源")]),e._v(" "),o("span",{staticClass:"head-card-title"},[e._v("复制项目\n              "),o("i",{staticClass:"el-icon-warning"})])]),e._v(" "),o("div",{staticClass:"check-all"},[o("el-form",{attrs:{inline:!0,size:"mini"}},[o("el-form-item",{attrs:{label:e.checkAllCopyItem?"取消全选":"全选"}},[o("el-switch",{on:{change:e.handleCheckAllChange},model:{value:e.checkAllCopyItem,callback:function(t){e.checkAllCopyItem=t},expression:"checkAllCopyItem"}})],1)],1)],1)],1),e._v(" "),o("el-checkbox-group",{model:{value:e.checkedCopyList,callback:function(t){e.checkedCopyList=t},expression:"checkedCopyList"}},e._l(e.copyOptions,function(t){return o("div",{key:t.val,staticClass:"head-check-options",class:[t.showRoomSelect&&"合租"===e.activeName?"especial":""]},[t.showRoomSelect&&"合租"===e.activeName?o("el-select",{attrs:{size:"mini"},model:{value:e.copyItemsParams.rentTypeRoomCode,callback:function(t){e.$set(e.copyItemsParams,"rentTypeRoomCode",t)},expression:"copyItemsParams.rentTypeRoomCode"}},e._l(e.roomSelectList,function(e){return o("el-option",{key:e.roomCode,attrs:{label:e.roomName,value:e.roomCode}})})):e._e(),e._v(" "),o("el-checkbox",{attrs:{label:t.val},on:{change:e.handleOptionsChange}},[o("div",{staticClass:"label"},[e._v("\n                "+e._s(t.label)+"\n              ")])])],1)}))],1),e._v(" "),o("span",{attrs:{slot:"card-title"},slot:"card-title"},[e._v("请选择要复制到的房间号")])],1),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveCopyItems}},[e._v("确 定")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:function(t){e.copyItemsModelVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]}}});