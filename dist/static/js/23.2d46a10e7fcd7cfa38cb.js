webpackJsonp([23],{"/+Ma":function(t,e,a){var l=a("2dT3");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("8bSs")("28e3fb80",l,!0)},"2dT3":function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,".pswp{z-index:9999999}.model-table{margin:0}",""])},nyma:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("a3Yh"),i=a.n(l),s=a("cAgV"),r=a("U4Ig"),o=a.n(r),n=(a("0xDb"),a("tDxQ"));e.default={name:"hotRrcommend",directives:{waves:s.a},components:{GridUnit:o.a},data:function(){var t;return t={searchParams:{status:"",keyword:"",cityId:""},temp:{},cityList:[],colModels:[{prop:"title",label:"搜索词TOP"},{prop:"title",label:"搜索次数",sortable:!0,align:"right"},{prop:"title",label:"搜索结果数",sortable:!0,align:"right"},{label:"操作",slotName:"handle",width:150,fixed:"right",align:"center"},{prop:"title",label:"操作时间",width:150,fixed:"right",filter:"parseTime"}],tableHeight:300,url:n.c.defaultOptions.requestUrl,method:n.c.defaultOptions.method,rules:{data:[{required:!0,message:"请输入搜索词",trigger:"blur"}]}},i()(t,"temp",{}),i()(t,"actionBaseUrl","https://dev.mdguanjia.com/bop/"),i()(t,"layer_showInfo",!1),t},created:function(){var t=this;n.a.cityList().then(function(e){t.cityList=e.data})},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$refs.refGridUnit.$el.offsetTop||140,a=document.body.clientHeight-e-5-20;t.tableHeight=a>300?a:300,window.onresize=function(){return a=document.body.clientHeight-e-5-20,void(t.tableHeight=t.tableHeight=a>300?a:300)}})},computed:{tableStyle:function(){return{width:"100%",height:this.tableHeight+"px"}}},methods:{searchParam:function(t){"clear"===t&&(this.searchParams={}),this.$refs.refGridUnit.searchHandler()},handleAdd:function(){this.temp={data:"",cityId:this.searchParams.cityId},this.layer_showInfo=!0},handleSetting:function(t){},saveData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=t.temp.data.split(/[\n|\r\n|\r]/gi).join(",");console.log(a),t.searchParam(),t.layer_showInfo=!1,t.$notify({title:"成功",message:"等待接口",type:"success",duration:2e3})}})},dialogClose:function(){this.temp={},this.$refs.dataForm.resetFields(),this.layer_showInfo=!1}}}},r6Ud:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{inline:!0,model:t.searchParams,size:"small"}},[a("el-form-item",[a("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"城市"},model:{value:t.searchParams.cityId,callback:function(e){t.$set(t.searchParams,"cityId",e)},expression:"searchParams.cityId"}},t._l(t.cityList,function(t){return a("el-option",{key:t.cityId,attrs:{label:t.cityName,value:t.cityId}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"搜索词状态"},model:{value:t.searchParams.status,callback:function(e){t.$set(t.searchParams,"status",e)},expression:"searchParams.status"}},[a("el-option",{attrs:{label:"未推荐",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已推荐",value:"2"}})],1)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"搜索词"},model:{value:t.searchParams.keyword,callback:function(e){t.$set(t.searchParams,"keyword",e)},expression:"searchParams.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchParam}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-remove-outline"},on:{click:function(e){t.searchParam("clear")}}},[t._v("清空")])],1),t._v(" "),a("el-button",{staticClass:"right",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.handleAdd}},[t._v("新增搜索词")])],1),t._v(" "),a("GridUnit",{ref:"refGridUnit",attrs:{columns:t.colModels,showPagination:!1,url:t.url,listField:"data",dataMethod:t.method,height:t.tableHeight},scopedSlots:t._u([{key:"handle",fn:function(e){return[2===e.row.status?a("el-button",{attrs:{type:"primary",icon:"el-icon-setting",size:"small"},on:{click:function(a){t.handleSetting(e.row)}}},[t._v("\n        设为推荐词\n      ")]):a("el-button",{attrs:{type:"danger",icon:"el-icon-warning",size:"small"},on:{click:function(a){t.handleSetting(e.row)}}},[t._v("\n        取消设置\n      ")])]}}])}),t._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:"新增搜索词",visible:t.layer_showInfo},on:{"update:visible":function(e){t.layer_showInfo=e},close:t.dialogClose}},[a("el-form",{ref:"dataForm",attrs:{size:"small","status-icon":"",rules:t.rules,model:t.temp,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"搜索词",prop:"data"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"输入多个搜索词时，请换行区分"},model:{value:t.temp.data,callback:function(e){t.$set(t.temp,"data",e)},expression:"temp.data"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"投放城市"}},[a("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:"全部城市"},model:{value:t.temp.cityId,callback:function(e){t.$set(t.temp,"cityId",e)},expression:"temp.cityId"}},t._l(t.cityList,function(t){return a("el-option",{key:t.cityId,attrs:{label:t.cityName,value:t.cityId}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.layer_showInfo=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveData}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]}},uDmn:function(t,e,a){var l=a("Alxp")(a("nyma"),a("r6Ud"),function(t){a("/+Ma")},null,null);t.exports=l.exports}});