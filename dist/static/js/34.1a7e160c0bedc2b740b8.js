webpackJsonp([34],{eXvO:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return"{}"!==JSON.stringify(e.estateModel)?s("div",{staticClass:"estate-model-container"},[s("el-form",{ref:"estateModel",attrs:{model:e.estateModel,rules:e.estateModelRules,"label-width":"110px",size:"small"}},[s("el-collapse",{attrs:{accordion:""},on:{change:e.checkSaveStatus},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[s("el-collapse-item",{staticClass:"estate-collapse-container",attrs:{name:"1"}},[s("template",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"model-panel-title"},[e._v("\n            公寓\n          ")])]),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"品牌公寓",prop:"estateName"}},[s("el-input",{model:{value:e.estateModel.estateName,callback:function(t){e.$set(e.estateModel,"estateName",t)},expression:"estateModel.estateName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所在地区",prop:"areaCode"}},[s("area-select",{ref:"areaSelect",attrs:{level:1},on:{input:function(t){e.searchZoneList(!1)}},model:{value:e.estateModel.areaCode,callback:function(t){e.$set(e.estateModel,"areaCode",t)},expression:"estateModel.areaCode"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属板块",prop:e.zoneList.length?"zoneId":""}},[s("el-select",{staticClass:"estate-model-select",attrs:{placeholder:e.zoneList.length?"请选择":"无"},model:{value:e.estateModel.zoneId,callback:function(t){e.$set(e.estateModel,"zoneId",t)},expression:"estateModel.zoneId"}},e._l(e.zoneList,function(e){return s("el-option",{key:e.zoneId,attrs:{label:e.zoneName,value:e.zoneId}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"具体位置",prop:"address"}},[s("map-select",{attrs:{areaCode:e.estateModel.areaCode,value:e.estateModel.address},on:{addressChange:e.addressChange}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"看房电话",prop:"contactName"}},[s("el-input",{attrs:{placeholder:"联系人"},model:{value:e.estateModel.contactName,callback:function(t){e.$set(e.estateModel,"contactName",t)},expression:"estateModel.contactName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-form-item",{attrs:{"label-width":"0"}},[s("el-select",{model:{value:e.estateModel.contactGender,callback:function(t){e.$set(e.estateModel,"contactGender",t)},expression:"estateModel.contactGender"}},[s("el-option",{attrs:{label:"先生",value:1}}),e._v(" "),s("el-option",{attrs:{label:"女士",value:2}})],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{"label-width":"0",prop:"contactMobile"}},[s("el-input",{attrs:{type:"number",placeholder:"联系电话"},model:{value:e.estateModel.contactMobile,callback:function(t){e.$set(e.estateModel,"contactMobile",t)},expression:"estateModel.contactMobile"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"公寓简介",prop:"houseDesc"}},[s("el-input",{attrs:{type:"textarea",placeholder:"最多可输入150个字",rows:3},model:{value:e.estateModel.houseDesc,callback:function(t){e.$set(e.estateModel,"houseDesc",t)},expression:"estateModel.houseDesc"}}),e._v(" "),s("span",{staticClass:"estate-iontro-length-tips"},[e._v(e._s(e.estateModel.houseDesc?e.estateModel.houseDesc.length:0)+"/150")])],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"房源管理权限",prop:"orgId"}},[s("el-select",{staticClass:"estate-model-select",attrs:{filterable:"",remote:"",clearable:!0,placeholder:"组织名称","remote-method":e.searchOrgListByKeywords,loading:e.loading,disabled:"编辑公寓"===e.type},on:{clear:e.setOrg},model:{value:e.estateModel.orgId,callback:function(t){e.$set(e.estateModel,"orgId",t)},expression:"estateModel.orgId"}},e._l(e.orgList,function(t){return s("el-option",{key:t.ordId,attrs:{value:t.orgId,label:t.orgName},nativeOn:{click:function(s){e.setOrg(t)}}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t.orgName))]),e._v(" "),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.adminMobile))])])}))],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{"label-width":"0"}},[s("el-input",{attrs:{placeholder:"账号名",disabled:!0},model:{value:e.estateModel.accountName,callback:function(t){e.$set(e.estateModel,"accountName",t)},expression:"estateModel.accountName"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6}},[s("el-form-item",[s("el-checkbox",{attrs:{label:"飞虎队",name:"type",disabled:"编辑公寓"===this.type},on:{change:e.handleSourceInfo},model:{value:e.estateModel.tag,callback:function(t){e.$set(e.estateModel,"tag",t)},expression:"estateModel.tag"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[e.estateModel.tag?s("el-form-item",{attrs:{"label-width":"0",prop:"sourceInfo"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",placeholder:"房源提供者","remote-method":e.fetchFlyTigerList,loading:e.loading,clearable:!0,size:"small"},model:{value:e.estateModel.sourceInfo,callback:function(t){e.$set(e.estateModel,"sourceInfo",t)},expression:"estateModel.sourceInfo"}},e._l(e.filterManagerList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.mobile))])])}))],1):e._e()],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"公寓/照片"}},[s("el-badge",{staticClass:"estate-badge-btn",attrs:{value:e.estateModel.pictureList?e.estateModel.pictureList.length:0}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addPics("estatePics",-1)}}},[e._v("公寓照片")])],1),e._v(" "),s("el-button",{staticClass:"estate-badge-btn",attrs:{type:"primary"},on:{click:e.openDeviceModel}},[e._v("房源基础设施")])],1)],1)],1)],2),e._v(" "),s("el-collapse-item",{staticClass:"estate-collapse-container",attrs:{name:"2"}},[s("template",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"model-panel-title"},[e._v("\n            楼层\n          ")])]),e._v(" "),s("el-row",{staticClass:"estate-floor-container",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"公寓楼层","label-width":"110px",prop:"floors"}},[e._l(e.estateModel.floors,function(t,a){return s("el-row",{key:a,attrs:{gutter:10}},[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{"label-width":"0",prop:"floors."+a+".floorName",rules:e.estateModelRules.floor.floorName}},[s("el-input",{attrs:{type:"text"},model:{value:t.floorName,callback:function(s){e.$set(t,"floorName",s)},expression:"item.floorName"}},[s("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("楼层名称")])],2)],1)],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-form-item",{attrs:{"label-width":"0",prop:"floors."+a+".roomNum",rules:e.estateModelRules.floor.roomNum}},[s("el-input",{attrs:{type:"number",min:"0",disabled:t.forbbidenEdit},model:{value:t.roomNum,callback:function(s){e.$set(t,"roomNum",s)},expression:"item.roomNum"}},[s("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("共")]),e._v(" "),s("template",{attrs:{slot:"append"},slot:"append"},[e._v("间")])],2)],1)],1),e._v(" "),t.forbbidenEdit?e._e():s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{"label-width":"0",prop:"floors."+a+".startNo",rules:e.estateModelRules.floor.startNo}},[s("el-input",{attrs:{type:"number",min:"0"},model:{value:t.startNo,callback:function(s){e.$set(t,"startNo",s)},expression:"item.startNo"}},[s("template",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("起始房号")])],2)],1)],1),e._v(" "),t.forbbidenEdit||"编辑公寓"!==e.type?e._e():s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{"label-width":"0",prop:"floors."+a+".roomTypeId",rules:e.estateModelRules.floor.roomTypeId}},[s("el-select",{attrs:{placeholder:"请选择房间类型"},model:{value:t.roomTypeId,callback:function(s){e.$set(t,"roomTypeId",s)},expression:"item.roomTypeId"}},e._l(e.estateModel.roomTypeList,function(e,t){return s("el-option",{key:t,attrs:{label:e.styleName,value:e.id}})}))],1)],1),e._v(" "),e.estateModel.floors.length>1?s("el-col",{staticClass:"estate-floor",attrs:{span:2}},[s("el-button",{staticClass:"delete-btn",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){e.deleteCurItem(1,a)}}})],1):e._e()],1)}),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.addEstateFloor}},[e._v("添加楼层")])],2)],1)],1)],2),e._v(" "),s("el-collapse-item",{staticClass:"estate-collapse-container",attrs:{name:"3"}},[s("template",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"model-panel-title"},[e._v("\n            房型\n          ")])]),e._v(" "),s("el-row",{staticClass:"estate-house-type-container",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"房间类型","label-width":"110px",prop:"roomTypeList"}},[e._l(e.estateModel.roomTypeList,function(t,a){return s("el-row",{key:t.id,attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{"label-width":"0",prop:"roomTypeList."+a+".styleName",rules:e.estateModelRules.roomType.styleName}},[s("el-input",{model:{value:t.styleName,callback:function(s){e.$set(t,"styleName",s)},expression:"item.styleName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-badge",{staticClass:"estate-badge-btn",attrs:{value:t&&t.pictureList?t.pictureList.length:0}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addPics("roomTypePics",a)}}},[e._v("房型照片")])],1),e._v(" "),"编辑公寓"===e.type?s("el-badge",{staticClass:"estate-badge-btn",attrs:{value:t&&t.roomCodes?t.roomCodes.length:0}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.openBatchCopyModel(a)}}},[e._v("应用到房间")])],1):e._e()],1),e._v(" "),e.estateModel.roomTypeList.length>1?s("el-col",{staticClass:"estate-floor",attrs:{span:2}},[s("el-button",{staticClass:"delete-btn",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){e.deleteCurItem(2,a)}}})],1):e._e()],1)}),e._v(" "),"编辑公寓"===e.type?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addEstateRoomType}},[e._v("添加房间类型")]):e._e()],2)],1)],1)],2)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"estatePics"===e.curUploadPicsType?"上传公寓照片":"上传房间照片",visible:e.uploadPicsModelVisible,"append-to-body":!0,"custom-class":"upload-pics-model",width:"600px"},on:{"update:visible":function(t){e.uploadPicsModelVisible=t},close:e.uploadModelClose}},[s("div",{staticClass:"previewItems"},[s("Preview",{attrs:{"pic-list":e.currentPicList,"delete-icon":"delete",disabled:""},on:{emitDelete:e.emitDelete}}),e._v(" "),s("label",{staticClass:"el-upload el-upload--picture-card uploadImage",attrs:{for:"uploadImages"}},[s("i",{staticClass:"el-icon-plus"}),e._v(" "),s("input",{attrs:{type:"file",id:"uploadImages",accept:e.accept,multiple:""},on:{change:function(t){e.uploadImg(t)}}})])],1),e._v(" "),s("p",{staticClass:"upload-pics-info"},[e._v("温馨提示： ")]),e._v(" "),s("p",{staticClass:"upload-pics-info"},[e._v("1.请勿上传虚假、模糊、与房源信息无关、含有其他公司水印的照片； ")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:"estatePics"===e.curUploadPicsType,expression:"curUploadPicsType === 'estatePics'"}],staticClass:"upload-pics-info"},[e._v("2.请上传相关体现公寓形象的照片； ")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:"roomTypePics"===e.curUploadPicsType,expression:"curUploadPicsType === 'roomTypePics'"}],staticClass:"upload-pics-info"},[e._v("2.房间照片最佳组合：卧室2~6张、公共区域1~4张、厨房1~3张、卫生间1-4张； ")]),e._v(" "),s("p",{staticClass:"upload-pics-info"},[e._v("3.目前最多支持15张，支持JPG/JPEG/PNG，可以拖动图片进行排序，支持批量上传。")]),e._v(" "),s("ImageCropper",{attrs:{cropperList:e.cropperList},on:{emitCropperList:e.emitCropperList,emitCropperData:e.emitCropperData}}),e._v(" "),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.uploadPicsModelVisible=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"公共基础设施",visible:e.estateDeviceModelVisible,width:"600px","append-to-body":!0,"custom-class":"estate-device-model"},on:{"update:visible":function(t){e.estateDeviceModelVisible=t}}},[s("estate-device-group",{ref:"deviceModel",attrs:{deviceMap:e.deviceMap,checkList:e.deviceList,estateDeviceModelVisible:e.estateDeviceModelVisible}}),e._v(" "),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.saveDeviceData("save")}}},[e._v("确 定")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.saveDeviceData("clear")}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"应用到房间",visible:e.batchCopyModelVisible,width:"700px","append-to-body":!0},on:{"update:visible":function(t){e.batchCopyModelVisible=t}}},[s("room-list-selecter",{ref:"batchCopyRoom",attrs:{roomList:e.batchCopyRoomList,checkedList:e.estateModel.roomTypeList[this.curRoomTypeIndex]?e.estateModel.roomTypeList[this.curRoomTypeIndex].roomCodes:[],visible:e.batchCopyModelVisible}},[s("el-row",{staticClass:"model-head",attrs:{type:"flex",justify:"center"}},[s("el-checkbox",{attrs:{label:"当前房间已是该类型",disabled:""},model:{value:e.batchCopyOptions.isSelected,callback:function(t){e.$set(e.batchCopyOptions,"isSelected",t)},expression:"batchCopyOptions.isSelected"}}),e._v(" "),s("el-checkbox",{attrs:{label:"当前房间尚未选择该类型",disabled:""},model:{value:e.batchCopyOptions.noSelected,callback:function(t){e.$set(e.batchCopyOptions,"noSelected",t)},expression:"batchCopyOptions.noSelected"}}),e._v(" "),s("el-checkbox",{attrs:{label:"当前房间正在选择该类型"},on:{change:function(t){e.batchCopyOptions.activeSelected=!0}},model:{value:e.batchCopyOptions.activeSelected,callback:function(t){e.$set(e.batchCopyOptions,"activeSelected",t)},expression:"batchCopyOptions.activeSelected"}})],1),e._v(" "),s("span",{attrs:{slot:"card-title"},slot:"card-title"},[e._v("请选择要应用该房型的房间")])],1),e._v(" "),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveBatchCobyRoom}},[e._v("确 定")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.batchCopyModelVisible=!1}}},[e._v("取 消")])],1)],1)],1):e._e()},staticRenderFns:[]}},lAQZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("lC5x"),o=s.n(a),i=s("hRKE"),l=s.n(i),r=s("rVsN"),n=s.n(r),c=s("J0Oq"),d=s.n(c),p=s("IHPB"),u=s.n(p),m=s("aA9S"),h=s.n(m),f=s("ZLEe"),g=s.n(f),v=s("3cXf"),b=s.n(v),M=s("KH7x"),y=s.n(M),L=s("T76A"),C=s.n(L),_=s("o1W5"),I=s.n(_),x=s("QHcW"),N=s("pFO2"),k=s("H1GV"),T=s.n(k),w=s("fDDG"),D=s.n(w),P=s("c5or"),$=s.n(P),S=s("1dB7"),O=s.n(S),E=s("0xDb"),z=[],R=function(e,t){var s=0;return e.length!==t.length?++s:(e.forEach(function(e,a){e.imageName!==t[a].imageName&&s++}),s>0)};t.default={name:"estateModel",components:{mapSelect:I.a,areaSelect:C.a,Preview:T.a,ImageCropper:D.a,estateDeviceGroup:O.a,RoomListSelecter:$.a},props:["showEstateModel","type"],data:function(){return{currentPicList:[],estateModel:{},estateModelRules:{estateName:[{required:!0,message:"请输入公寓名称",trigger:"blur"}],areaCode:[{required:!0,validator:function(e,t,s){""===t[0]?s(new Error("请选择所在地区")):s()},trigger:"change"}],zoneId:[{required:!0,message:"请选择所属板块",trigger:"change"}],address:[{required:!0,message:"请选择具体位置",trigger:"change"}],houseDesc:[{max:150,message:"长度不能超过150个字符",trigger:"change"}],contactName:[{required:!0,message:"请输入联系人",trigger:"change"}],contactMobile:[{required:!0,message:"请输入手机号码",trigger:"blur"}],orgId:[{required:!0,message:"请选择一个组织，支持模糊查询",trigger:"change"}],floors:[{required:!0,message:"",trigger:"change"}],floor:{floorName:[{required:!0,message:"请填写楼层名称",trigger:"change"}],roomNum:[{required:!0,message:"请填写房间数量",trigger:"change"}],startNo:[{required:!0,message:"请填写起始房号",trigger:"change"}],roomTypeId:[{required:!0,message:"请选择房间类型",trigger:"change"}]},roomTypeList:[{required:!0,message:"",trigger:"change"}],roomType:{styleName:[{required:!0,message:"请填写房间类型",trigger:"change"}]},sourceInfo:[{required:!0,message:"请选择一个房源提供者",trigger:"change"}]},loading:!1,zoneList:[],addressList:[],orgList:[],activeNames:["1"],uploadPicsModelVisible:!1,estateDeviceModelVisible:!1,cropperList:[],accept:"image/png, image/jpeg, image/jpg",checkAll:!1,isIndeterminate:!1,deviceMap:{},deviceList:{},curUploadPicsType:"",batchCopyModelVisible:!1,batchCopyRoomList:[],curRoomTypeIndex:0,batchCopyOptions:{isSelected:!0,noSelected:!1,activeSelected:!0},curPicListIndex:-1,tempFormData:{},regionOptions:[],tempAreaCode:[],cityManagerList:[],filterManagerList:[]}},computed:{},methods:{searchZoneList:function(e){var t=this,s=y()(this.estateModel.areaCode,3);this.estateModel.provinceId=s[0],this.estateModel.cityId=s[1],this.estateModel.regionId=s[2],this.tempFormData.regionId===this.estateModel.regionId||e||(this.estateModel.address="",this.estateModel.zoneId=""),void 0!==this.estateModel.areaCode[2]?Object(x.o)({regionId:this.estateModel.regionId}).then(function(e){t.zoneList=e.data.list}):this.zoneList=[]},searchOrgListByKeywords:function(e){var t=this;""!==e?(this.loading=!0,Object(x.l)({orgName:e}).then(function(e){t.loading=!1,"0"===e.code&&(t.orgList=e.data.list)})):this.orgList=[]},addPics:function(e,t){this.curUploadPicsType=e,this.uploadPicsModelVisible=!0,this.curPicListIndex=t,this.currentPicList=-1===this.curPicListIndex?this.estateModel.pictureList:this.estateModel.roomTypeList[this.curPicListIndex]?this.estateModel.roomTypeList[this.curPicListIndex].pictureList:[]},openDeviceModel:function(){var e=this;"{}"===b()(this.deviceMap)?Object(x.i)().then(function(t){"0"===t.code&&(e.$set(e,"deviceMap",t.data||{}),e.$set(e,"deviceList",{services:g()(e.deviceMap.baseSupportMap),storeServices:g()(e.deviceMap.storeMap),surroundings:g()(e.deviceMap.surroundingMap)}),e.estateDeviceModelVisible=!0)}):this.estateDeviceModelVisible=!0},saveDeviceData:function(){var e=this.$refs.deviceModel.saveDeviceData();this.estateModel.services=e.services,this.estateModel.storeServices=e.storeServices,this.estateModel.surroundings=e.surroundings,this.estateDeviceModelVisible=!1},addEstateFloor:function(){this.estateModel.floors.push({floorSort:"",floorName:"",roomNum:"",startNo:"",roomTypeId:""})},addEstateRoomType:function(){this.estateModel.roomTypeList.push({id:void 0,styleName:"",pictureList:[],roomCodes:[]})},resetForm:function(e){this.$refs[e].resetFields()},checkAddressSelect:function(e){this.estateModel.areaCode[2]||(this.$message.error("请先选择所在地区"),e.target.blur())},setOrg:function(e){this.estateModel.accountName=e?e.accountName:"",this.estateModel.adminUserId=e?e.adminUserId:""},initEstateData:function(){var e=this,t=this.$store.state.estateDetailData.estateInfo;t.areaCode=[t.provinceId,t.cityId,t.regionId],"新建公寓"===this.type?(t.contactGender=1,this.orgList=[],this.zoneList=[]):(t.tag=1===t.tag,t.address=t.subdistrictName?t.subdistrictName+" - "+t.subdistrictAddress:"",t.floors.forEach(function(e){e.forbbidenEdit=!0}),t.sourceInfo&&(this.filterManagerList=[{id:t.sourceInfo.split(",")[0],name:t.sourceInfo.split(",")[1]}],t.sourceInfo=t.sourceInfo.split(",")[0]),t.pictureList.forEach(function(e){e.title=e.imageName,e.key=Math.random().toFixed(5),e.isBase64=0}),t.roomTypeList.forEach(function(e){e.pictureList.forEach(function(e){e.title=e.imageName,e.key=Math.random().toFixed(5),e.isBase64=0})}),this.orgList=[{orgId:t.orgId,orgName:t.orgName}]),setTimeout(function(){e.$set(e,"estateModel",Object(E.d)(t)),e.activeNames=["1"],z=["1"],"新建公寓"===e.type?(e.addEstateFloor(),e.addEstateRoomType()):t.zoneId&&e.searchZoneList(!0),e.$set(e,"tempFormData",Object(E.d)(e.estateModel)),e.$nextTick(function(){e.$refs.estateModel&&e.$refs.estateModel.clearValidate()})},0)},returnEstateData:function(){var e=this,t=!1;return this.$refs.estateModel.validate(function(s){if(!s)return e.$message.error("您还有必填信息未填写完全，请全部填写好后再保存"),!1;var a=Object(E.d)(e.estateModel);a.tag=!0===a.tag?1:0;var o=a.tag?e.filterManagerList.filter(function(e){return e.id===a.sourceInfo}):"";a.sourceInfo=o.length?o[0].id+","+o[0].name:"",t=a}),t},checkSaveStatus:function(e){if("新建公寓"!==this.type)if(this.checkEditFlag())this.$message.error("请先将当前更改的内容保存之后再操作"),this.activeNames=[z.join("")];else switch(e){case"1":this.$set(this,"tempFormData",Object(E.d)(this.estateModel)),z=["1"];break;case"2":this.$set(this,"tempFormData",{fangyuanCode:this.estateModel.fangyuanCode,floors:Object(E.d)(this.estateModel.floors)}),z=["2"];break;case"3":this.$set(this,"tempFormData",{fangyuanCode:this.estateModel.fangyuanCode,roomTypeList:Object(E.d)(this.estateModel.roomTypeList)}),z=["3"]}},checkEditFlag:function(){var e=this,t=!1;return g()(this.tempFormData).forEach(function(s){b()(e.tempFormData[s])!==b()(e.estateModel[s])&&("pictureList"===s?t=R(e.tempFormData[s],e.estateModel[s]):"roomTypeList"===s?e.tempFormData[s].forEach(function(a,o){t=R(a.pictureList,e.estateModel[s][o].pictureList)}):t=!0)}),t},openBatchCopyModel:function(e){var t=this;Object(x.g)({fangyuanCode:this.$store.state.estateDetailData.fangyuanCode}).then(function(s){"0"===s.code&&s.data&&(t.batchCopyRoomList=s.data,t.curRoomTypeIndex=e,t.batchCopyModelVisible=!0)})},saveBatchCobyRoom:function(){var e=this,t=this.$refs.batchCopyRoom.returnCheckedList();this.batchCopyModelVisible=!1,t.length&&this.estateModel.roomTypeList.forEach(function(s,a){e.curRoomTypeIndex===a?s.roomCodes=t:s.roomCodes=s.roomCodes.filter(function(e){return!t.includes(e)})})},deleteCurItem:function(e,t){if(1===e){if("编辑公寓"===this.type&&this.estateModel.floors[t].roomNum>0)return void this.$message.error("当前楼层下面房间不为空，不能删除该楼层");this.estateModel.floors.splice(t,1)}else{if(this.estateModel.roomTypeList[t].roomCodes.length>0)return void this.$message.error("已有应用该房型的房间，不能删除该房型");this.estateModel.roomTypeList.splice(t,1)}},fetchFlyTigerList:function(e){var t=this;""!==e?(this.loading=!0,this.cityManagerList.length?(this.loading=!1,this.filterManagerList=this.cityManagerList.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.mobile.includes(e)})):N.b.queryCityManager().then(function(s){t.loading=!1,"0"===s.code&&s.data&&(t.cityManagerList=s.data,t.filterManagerList=t.cityManagerList.filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.mobile.includes(e)}))})):this.filterManagerList=[]},handleSourceInfo:function(e){e||"新建公寓"!==this.type||(this.estateModel.sourceInfo="")},addressChange:function(e){this.estateModel=h()(this.estateModel,e),this.$refs.estateModel.validateField("address"),this.searchZoneList(!0)},uploadModelClose:function(){this.currentPicList=[]},emitDelete:function(e){-1===this.curPicListIndex?this.estateModel.pictureList=e:this.estateModel.roomTypeList[this.curPicListIndex].pictureList=e,this.currentPicList=e||[]},emitCropperList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cropperList=e},emitCropperData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach(function(e,t){e.type=1,e.imageName=e.title,e.image=e.src,e.key=e.key||Math.random().toFixed(5),void 0===e.isBase64&&(e.isBase64=1)});var t=-1===this.curPicListIndex?this.estateModel.pictureList:this.estateModel.roomTypeList[this.curPicListIndex].pictureList;console.log(t),-1===this.curPicListIndex?this.estateModel.pictureList=[].concat(u()(this.estateModel.pictureList),u()(e)):this.estateModel.roomTypeList[this.curPicListIndex].pictureList=[].concat(u()(this.estateModel.roomTypeList[this.curPicListIndex].pictureList),u()(e)),this.currentPicList=[].concat(u()(this.currentPicList),u()(e))},uploadImg:function(e){var t=this;return d()(o.a.mark(function s(){var a,i,r,c,d;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e.target.value){s.next=3;break}return console.log("取消上传..."),s.abrupt("return",!1);case 3:if(a=[],i=function(e){return new n.a(function(t){var s=new FileReader;s.onerror=function(e){console.log("读取异常....")},s.onload=function(s){var a="object"===l()(s.target.result)?window.URL.createObjectURL(new Blob([s.target.result])):s.target.result,o="";o=e.name?e.name.split(".")[0].length<=30?e.name.split(".")[0]:e.name.split(".")[0].substr(0,30):"",t({img:a,imageName:o,type:1})},s.readAsArrayBuffer(e)})},r=e.target.files,!((c=-1===t.curPicListIndex?t.estateModel.pictureList:t.estateModel.roomTypeList[t.curPicListIndex].pictureList).length+r.length>15)){s.next=11;break}return t.$message.error("您已上传"+c.length+"张图片，最多还能上传"+(15-c.length)+"张图片"),e.target.value=null,s.abrupt("return",!1);case 11:d=0;case 12:if(!(d<r.length)){s.next=25;break}if(t.accept.includes(r[d].type)){s.next=17;break}return t.$message.error("请上传"+t.accept.replace(/image\//gi,"")+"的图片"),e.target.value=null,s.abrupt("return",!1);case 17:return s.t0=a,s.next=20,i(r[d]);case 20:s.t1=s.sent,s.t0.push.call(s.t0,s.t1);case 22:d++,s.next=12;break;case 25:t.cropperList=a.map(function(e,t){return{img:e.img,imageName:e.imageName,type:e.type}}),t.layer_cropper=!0,e.target.value=null;case 28:case"end":return s.stop()}},s,t)}))()}},watch:{showEstateModel:{immediate:!0,handler:function(e){e?this.initEstateData():this.$store.commit("CLEAR_ESTATEDATA")}}},mounted:function(){}}},opQI:function(e,t){},phKz:function(e,t,s){var a=s("Alxp")(s("lAQZ"),s("eXvO"),function(e){s("opQI")},"data-v-40255ef2",null);e.exports=a.exports}});