webpackJsonp([33],{"11cG":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.tabMapOptions,function(e,t){return s("el-tab-pane",{key:t,attrs:{label:e,name:e}})}),e._v(" "),s("el-form",{staticClass:"model-search clearfix",attrs:{inline:!0,size:"small"}},[s("div",[s("el-select",{staticClass:"item-select",attrs:{size:"small",filterable:"",clearable:"",placeholder:"房间状态"},model:{value:e.searchParams.houseStatus,callback:function(t){e.$set(e.searchParams,"houseStatus",t)},expression:"searchParams.houseStatus"}},[s("el-option",{attrs:{label:"已出租",value:1}}),e._v(" "),s("el-option",{attrs:{label:"未出租",value:0}})],1),e._v(" "),s("el-select",{staticClass:"item-select filter-item",attrs:{size:"small",filterable:"",clearable:"",placeholder:"房间类型"},model:{value:e.searchParams.houseType,callback:function(t){e.$set(e.searchParams,"houseType",t)},expression:"searchParams.houseType"}},[s("el-option",{attrs:{label:"普通",value:0}}),e._v(" "),s("el-option",{attrs:{label:"金融",value:1}}),e._v(" "),s("el-option",{attrs:{label:"飞虎队",value:2}})],1),e._v(" "),s("el-select",{staticClass:"item-select filter-item",attrs:{size:"small",filterable:"",clearable:"",placeholder:"麦邻发布状态"},model:{value:e.searchParams.publishStatus,callback:function(t){e.$set(e.searchParams,"publishStatus",t)},expression:"searchParams.publishStatus"}},[s("el-option",{attrs:{label:"未发布",value:0}}),e._v(" "),s("el-option",{attrs:{label:"已发布",value:1}}),e._v(" "),s("el-option",{attrs:{label:"发布中",value:2}})],1),e._v(" "),s("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.searchParam}},[e._v("查询")]),e._v(" "),s("el-button",{staticClass:"filter-item",attrs:{size:"small",icon:"el-icon-remove-outline"},on:{click:function(t){e.searchParam("clear")}}},[e._v("清空")])],1),e._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"small",clearable:"",placeholder:"组织名称"},model:{value:e.searchParams.organizationName,callback:function(t){e.$set(e.searchParams,"organizationName",t)},expression:"searchParams.organizationName"}}),e._v(" "),s("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{size:"small",clearable:"",placeholder:"手机号/姓名"},model:{value:e.searchParams.mobileOrName,callback:function(t){e.$set(e.searchParams,"mobileOrName",t)},expression:"searchParams.mobileOrName"}}),e._v(" "),s("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{size:"small",clearable:"",placeholder:"公寓/小区"},model:{value:e.searchParams.keywords,callback:function(t){e.$set(e.searchParams,"keywords",t)},expression:"searchParams.keywords"}}),e._v(" "),s("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"success",icon:"el-icon-upload"},on:{click:function(t){e.syncItems("on")}}},[e._v("发布")]),e._v(" "),s("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"danger",icon:"el-icon-remove"},on:{click:function(t){e.syncItems("off")}}},[e._v("撤销")]),e._v(" "),s("el-dialog",{staticClass:"select-dialog",attrs:{title:"选择发布平台",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticClass:"select-platform-container"},[s("div",{staticClass:"left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.publishSelect.ml,expression:"publishSelect.ml"}],attrs:{type:"checkbox",id:"mlRent"},domProps:{checked:Array.isArray(e.publishSelect.ml)?e._i(e.publishSelect.ml,null)>-1:e.publishSelect.ml},on:{change:function(t){var s=e.publishSelect.ml,l=t.target,a=!!l.checked;if(Array.isArray(s)){var i=e._i(s,null);l.checked?i<0&&(e.publishSelect.ml=s.concat([null])):i>-1&&(e.publishSelect.ml=s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.publishSelect,"ml",a)}}}),e._v(" "),s("label",{attrs:{for:"mlRent"}},[s("div",{staticClass:"ml-selectName"},[e._v("麦邻租房")]),e._v(" "),s("div",{staticClass:"ml-selectStatus"},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.publishSelect.ml,expression:"publishSelect.ml"}],staticClass:"el-icon-check"})])])]),e._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.publishSelect.idlefish,expression:"publishSelect.idlefish"}],attrs:{type:"checkbox",id:"idleFishRent"},domProps:{checked:Array.isArray(e.publishSelect.idlefish)?e._i(e.publishSelect.idlefish,null)>-1:e.publishSelect.idlefish},on:{change:function(t){var s=e.publishSelect.idlefish,l=t.target,a=!!l.checked;if(Array.isArray(s)){var i=e._i(s,null);l.checked?i<0&&(e.publishSelect.idlefish=s.concat([null])):i>-1&&(e.publishSelect.idlefish=s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.publishSelect,"idlefish",a)}}}),e._v(" "),s("label",{attrs:{for:"idleFishRent"}},[s("div",{staticClass:"ml-selectName"},[e._v("咸鱼租房")]),e._v(" "),s("div",{staticClass:"ml-selectStatus"},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.publishSelect.idlefish,expression:"publishSelect.idlefish"}],staticClass:"el-icon-check"})])])])]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.syncItems}},[e._v("发 布")])],1)])],1)]),e._v(" "),s("GridUnit",{ref:"refGridUnit",attrs:{columns:e.colModels,formOptions:e.searchParams,url:e.url,showSelection:!0,pageSizes:[50,100,200,500],dataMethod:e.method,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange},scopedSlots:e._u([{key:"slot_popover",fn:function(t){return["发布失败"===t.row.idlefishStatus?s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",[e._v("发布失败原因: "+e._s(t.row.failReason))]),e._v(" "),s("div",{attrs:{slot:"reference"},slot:"reference"},[s("el-tag",{attrs:{type:e._f("renderStatusType")(t.row.idlefishStatus)}},[e._v("\n              "+e._s(e._f("renderStatusValue")(t.row.idlefishStatus))+"\n            ")])],1)]):s("el-tag",{attrs:{type:e._f("renderStatusType")(t.row.idlefishStatus)}},[e._v("\n          "+e._s(e._f("renderStatusValue")(t.row.idlefishStatus))+"\n        ")])]}}])})],2)],1)},staticRenderFns:[]}},"17vN":function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,".model-search .filter-item{margin-left:10px}.select-platform-container{height:100px;padding:15px 10px}.item-select{width:150px}.left{margin-left:5%}.right{margin-right:5%}input[type=checkbox]{display:none}label{display:inline-block;width:120px;height:30px}.ml-selectStatus{width:40px;height:30px;margin-top:-30px;font-size:25px;color:orange;float:right;border:.5px solid #c0c4cc;text-align:center;line-height:35px}.ml-selectName{background-color:orange;width:80px;height:30px;font-size:15px;text-align:center;line-height:30px}#mlRent{position:absolute;clip:rect(0,0,0,0)}",""])},MPEE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("U4Ig"),a=s.n(l),i=(s("0xDb"),s("QHcW"));t.default={name:"houseSync",components:{GridUnit:a.a},filters:{renderStatusType:function(e){return{"已发布":"success","发布中":"primary","发布失败":"danger","下架中":"warning","未发布":"info"}[e]||"info"},renderStatusValue:function(e){return e||"未知"}},data:function(){return{tabMapOptions:["整租","合租","集中式"],activeName:"整租",searchParams:{houseRentType:1,houseStatus:0,houseType:"",publishStatus:"",organizationName:"",keywords:"",mobileOrName:""},selectedItems:[],colModels:[{prop:"organizationName",label:"组织名称"},{prop:"name",label:"姓名",width:100},{prop:"mobile",label:"手机号",width:150},{prop:"userType",label:"用户类型",width:100},{prop:"address",label:"房源位置",width:200},{prop:"roomName",label:"公寓/小区-房间",width:200},{prop:"houseType",label:"房源类型",width:150},{prop:"roomCode",label:"房源编码",width:100},{prop:"rent",label:"房价(元/月)",width:100,align:"right"},{prop:"roomStatus",label:"房间状态",width:100,type:"status",fixed:"right",unitFilters:{renderStatusType:function(e){return{"已出租":"success","未出租":"info"}[e]||"info"},renderStatusValue:function(e){return e||"未知"}}},{prop:"publishStatus",label:"麦邻租房",width:100,type:"status",fixed:"right",unitFilters:{renderStatusType:function(e){return{"已发布":"success","未发布":"info","发布中":"primary"}[e]||"info"},renderStatusValue:function(e){return e||"未知"}}},{prop:"idlefishStatus",label:"闲鱼租房",width:100,slotName:"slot_popover",fixed:"right"},{prop:"operation",label:"操作记录",width:180}],tableHeight:300,url:i.r.defaultOptions.requestUrl,method:i.r.defaultOptions.method,dialogVisible:!1,publishSelect:{ml:!0,idlefish:!0}}},mounted:function(){var e=this;this.$nextTick(function(){var t=document.body.clientHeight-230-64-20;e.tableHeight=t>300?t:300,window.onresize=function(){return t=document.body.clientHeight-230-64-20,void(e.tableHeight=e.tableHeight=t>300?t:300)}})},computed:{tableStyle:function(){return{width:"100%",height:this.tableHeight+"px"}}},methods:{searchParam:function(e){var t=this;"clear"===e&&(this.searchParams={houseStatus:"",houseType:"",publishStatus:"",organizationName:"",keywords:"",mobileOrName:""}),this.searchParams.houseRentType="整租"===this.activeName?1:"合租"===this.activeName?2:0,this.$nextTick(function(){t.$refs.refGridUnit.searchHandler()})},handleClickTab:function(e){this.searchParam("clear")},handleSelectionChange:function(e){this.selectedItems=e},syncItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"on",t={on:{title:"发布",api:i.r.publish},off:{title:"撤销",api:i.r.offshlef}};return 0===this.selectedItems.length?(this.$message.error("请选择需要"+t[e].title+"的房源"),!1):this.selectedItems.filter(function(e){return"发布中"===e.idlefishStatus}).length>0?(this.$message.error("发布中的房源不能进行"+t[e].title),!1):0!==this.selectedItems.filter(function(t){return t.idlefishStatus===e}).length?(this.$message.error("已"+t[e].title+"的房源不能再"+t[e].title),!1):void(this.dialogVisible=!0)},gotoHouseAsync:function(e){var t=this;e({platform:["idlefish"],roomCodes:this.selectedItems.map(function(e){return e.roomCode})}).then(function(e){t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.searchParam()})}}}},jAXw:function(e,t,s){var l=s("17vN");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);s("rjj0")("f8ef1ed8",l,!0)},pYQR:function(e,t,s){var l=s("VU/8")(s("MPEE"),s("11cG"),function(e){s("jAXw")},null,null);e.exports=l.exports}});